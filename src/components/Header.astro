---
const navItems = [
{ href: '/', label: 'Home', labelZh: 'È¶ñÈ°µ' },
{ href: '/blog', label: 'Blog', labelZh: 'ÂçöÂÆ¢' },
{ href: 'https://aibrew.alanhou.org/', label: 'News', labelZh: 'ËµÑËÆØ', external: true },
{ href: '/prompts', label: 'Prompts', labelZh: 'ÊèêÁ§∫ËØç' },
{ href: '/tools', label: 'Tools', labelZh: 'Â∑•ÂÖ∑' },
{ href: '/invitation-codes', label: 'Codes', labelZh: 'ÈÇÄËØ∑Á†Å' },
{ href: '/about', label: 'About', labelZh: 'ÂÖ≥‰∫é' },
];
---
<header class="header">
<nav class="nav">
  <a href="/" class="logo">
    <img src="/alanhou-logo.jpeg" alt="Alan Hou - Áî®Ë°åÂä®Ëµ¢ÂæóÂ∞äÈáç" width="180" height="60" />
  </a>
  <div class="nav-links">
    {navItems.map(item => (
      <a href={item.href} target={item.external ? '_blank' : undefined} rel={item.external ? 'noopener noreferrer' : undefined}>{item.label}</a>
    ))}
    <button id="search-btn" class="search-btn" aria-label="Search">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="11" cy="11" r="8"></circle>
        <path d="m21 21-4.35-4.35"></path>
      </svg>
      <span>Search</span>
      <kbd>‚åòK</kbd>
    </button>
  </div>
  <button id="theme-toggle" class="theme-toggle" aria-label="Toggle theme">
    <span class="sun">‚òÄÔ∏è</span>
    <span class="moon">üåô</span>
  </button>
  <button id="menu-toggle" class="menu-toggle" aria-label="Toggle menu">‚ò∞</button>
</nav>
</header>

<style>
.header {
  position: sticky;
  top: 0;
  z-index: 100;
  background: var(--primary);
  border-bottom: 1px solid var(--border);
}
.nav {
  max-width: 1200px;
  margin: 0 auto;
  padding: 1rem;
  display: flex;
  align-items: center;
  gap: 1rem;
}
.logo {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  text-decoration: none;
  color: white;
  font-weight: bold;
}
.logo img {
  border-radius: 4px;
}
.nav-links {
  display: flex;
  gap: 1.5rem;
  margin-left: auto;
  align-items: center;
}
.nav-links a {
  text-decoration: none;
  color: white;
  transition: opacity 0.2s;
}
.nav-links a:hover {
  opacity: 0.7;
}
.search-btn {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.4rem 0.75rem;
  background: rgba(255, 255, 255, 0.15);
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 6px;
  color: white;
  cursor: pointer;
  font-size: 0.9rem;
  transition: all 0.2s;
}
.search-btn:hover {
  background: rgba(255, 255, 255, 0.25);
  border-color: rgba(255, 255, 255, 0.5);
}
.search-btn kbd {
  font-size: 0.75rem;
  padding: 0.1rem 0.3rem;
  background: rgba(255, 255, 255, 0.2);
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 4px;
  font-family: inherit;
}
.theme-toggle {
  background: none;
  border: none;
  cursor: pointer;
  font-size: 1.2rem;
  padding: 0.5rem;
}
.theme-toggle .moon { display: none; }
:global(.dark) .theme-toggle .sun { display: none; }
:global(.dark) .theme-toggle .moon { display: inline; }
.menu-toggle {
  display: none;
  background: none;
  border: none;
  font-size: 1.5rem;
  cursor: pointer;
  color: white;
}
@media (max-width: 768px) {
  .nav-links { display: none; }
  .menu-toggle { display: block; }
  .nav-links.open {
    display: flex;
    flex-direction: column;
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: var(--primary);
    padding: 1rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.2);
  }
}
</style>

<script>
const toggle = document.getElementById('theme-toggle');
const menuToggle = document.getElementById('menu-toggle');
const navLinks = document.querySelector('.nav-links');

// Theme toggle
toggle?.addEventListener('click', () => {
  document.documentElement.classList.toggle('dark');
  localStorage.setItem('theme', document.documentElement.classList.contains('dark') ? 'dark' : 'light');
});

// Load saved theme
if (localStorage.getItem('theme') === 'dark' ||
    (!localStorage.getItem('theme') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
  document.documentElement.classList.add('dark');
}

// Mobile menu
menuToggle?.addEventListener('click', () => {
  navLinks?.classList.toggle('open');
});

// Search button
const searchBtn = document.getElementById('search-btn');
searchBtn?.addEventListener('click', () => {
  (window as any).openSearch?.();
});
</script>
