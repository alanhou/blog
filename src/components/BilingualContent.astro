---
interface Props {
defaultLang?: 'en' | 'zh' | 'both';
}
const { defaultLang = 'both' } = Astro.props;
---
<div class="bilingual-content" data-default-lang={defaultLang}>
<div class="lang-toggle">
  <button class="lang-btn active" data-lang="both">Both</button>
  <button class="lang-btn" data-lang="en">English</button>
  <button class="lang-btn" data-lang="zh">中文</button>
</div>
<div class="content-wrapper">
  <slot />
</div>
</div>

<style>
.bilingual-content {
  margin: 2rem 0;
}
.lang-toggle {
  display: flex;
  gap: 0.5rem;
  margin-bottom: 1rem;
  flex-wrap: wrap;
}
.lang-btn {
  padding: 0.5rem 1rem;
  border: 1px solid var(--border);
  background: var(--bg);
  color: var(--text);
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.2s;
}
.lang-btn:hover {
  border-color: var(--primary);
}
.lang-btn.active {
  background: var(--primary);
  color: white;
  border-color: var(--primary);
}
.content-wrapper {
  display: grid;
  gap: 2rem;
}
.content-wrapper.side-by-side {
  grid-template-columns: 1fr 1fr;
}
@media (max-width: 768px) {
  .content-wrapper.side-by-side {
    grid-template-columns: 1fr;
  }
}
</style>

<script>
document.querySelectorAll('.bilingual-content').forEach(container => {
  const buttons = container.querySelectorAll('.lang-btn');
  const wrapper = container.querySelector('.content-wrapper');

  buttons.forEach(btn => {
    btn.addEventListener('click', () => {
      buttons.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');

      const lang = btn.dataset.lang;
      wrapper?.querySelectorAll('[class*="lang-"]').forEach(el => {
        if (lang === 'both') {
          el.style.display = '';
          wrapper.classList.add('side-by-side');
        } else if (el.classList.contains(`lang-${lang}`)) {
          el.style.display = '';
          wrapper.classList.remove('side-by-side');
        } else {
          el.style.display = 'none';
          wrapper.classList.remove('side-by-side');
        }
      });
    });
  });
});
</script>
